{% extends 'base.html' %}

{% block title %}{{ county.name }} County - Roots Party{% endblock %}

{% block content %}
<div class="mt-8 mb-24 max-w-7xl mx-auto px-4">
    
    <!-- Breadcrumb / Back -->
    <a href="{% url 'county_map' %}" class="inline-flex items-center font-bold text-gray-500 hover:text-roots-red mb-8">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back to Map
    </a>

    <!-- Header -->
    <div class="bg-roots-black text-white p-6 md:p-12 border-4 border-roots-red shadow-[12px_12px_0px_0px_#E60000] mb-8 relative overflow-hidden" {% if county.image %}style="background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('{{ county.image.url }}'); background-size: cover; background-position: center;"{% endif %}>
        <div class="absolute top-0 right-0 p-4 opacity-10">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-64 w-64" fill="none" viewBox="0 0 24 24" stroke="currentColor">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        </div>
        
        <div class="relative z-10">
            <div class="flex flex-col md:flex-row md:items-center gap-4 mb-4">
                <span class="inline-block px-3 py-1 bg-white text-roots-black font-black text-sm uppercase">Code {{ county.code|default:"000" }}</span>
                <span class="inline-block px-3 py-1 
                    {% if county.presence_status == 'active' %}bg-green-600{% elif county.presence_status == 'growing' %}bg-amber-500{% elif county.presence_status == 'starting' %}bg-blue-500{% else %}bg-gray-500{% endif %} 
                    text-white font-black text-sm uppercase">
                    Status: {{ county.get_presence_status_display }}
                </span>
            </div>
            <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter leading-none mb-4">
                {{ county.name }} <span class="text-roots-red">County</span>
            </h1>

            {% if county.description %}
            <p class="text-xl font-bold text-gray-200 max-w-4xl mb-6 leading-relaxed border-l-4 border-roots-red pl-4">
                {{ county.description }}
            </p>
            {% endif %}
            
            {% if county.coordinator_name %}
            <div class="flex items-center gap-4 mt-6 p-4 bg-white/10 backdrop-blur-sm border-l-4 border-roots-red max-w-lg">
                <div class="w-12 h-12 bg-roots-red rounded-full flex items-center justify-center font-black text-xl">
                    {{ county.coordinator_name|slice:":1" }}
                </div>
                <div>
                    <div class="text-xs uppercase font-bold text-gray-300">County Coordinator</div>
                    <div class="text-xl font-bold">{{ county.coordinator_name }}</div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
        <!-- Main Content: Economic Plan -->
        <div class="md:col-span-2">
            <div class="bg-white border-4 border-roots-black p-6 md:p-8 shadow-[8px_8px_0px_0px_#1a1a1a]">
                <h2 class="text-3xl font-black uppercase mb-6 flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-roots-red" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    Economic Revolution Plan
                </h2>
                
                <div class="prose prose-lg max-w-none font-medium text-gray-800">
                    {% if county.notes %}
                        {{ county.notes|linebreaks }}
                    {% else %}
                        <div class="bg-gray-50 border-l-4 border-roots-red p-6">
                            <h4 class="font-black uppercase mb-2">Customized Blueprint Loading...</h4>
                            <p class="mb-4">The Roots Party is finalizing a specific economic revolution plan for <strong>{{ county.name }} County</strong>. Unlike other parties, we believe each county deserves a unique strategy based on its soil, climate, and resources.</p>
                            <p>Our forthcoming whitepaper will detail exactly how {{ county.name }} fits into the national agenda.</p>
                        </div>
                    {% endif %}
                </div>
                
                <div class="mt-8 pt-8 border-t-2 border-gray-100">
                     <h3 class="font-black uppercase text-xl mb-4">Suggest an Economic Activity</h3>
                     <p class="mb-4">Do you know a specific cash crop or industry that could thrive in {{ county.name }}? Let us know.</p>
                     <a href="{% url 'contact' %}?subject=policy" class="text-roots-red font-black border-b-2 border-roots-red hover:text-black hover:border-black transition-colors">Submit Suggestion &rarr;</a>
                </div>
            </div>
        </div>

        <!-- Sidebar: Stats & Action -->
        <div class="space-y-6">
            <!-- Stats -->
            <div class="bg-gray-50 border-4 border-gray-200 p-6">
                <h3 class="font-black uppercase text-gray-400 text-sm mb-4">County Metrics</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-4 border-2 border-roots-black text-center">
                        <div class="text-3xl font-black text-roots-red">{{ county.members_count }}</div>
                        <div class="text-[10px] font-bold uppercase text-gray-500">Members</div>
                    </div>
                    <div class="bg-white p-4 border-2 border-roots-black text-center">
                        <div class="text-3xl font-black text-roots-black">{{ county.offices_count }}</div>
                        <div class="text-[10px] font-bold uppercase text-gray-500">Offices</div>
                    </div>
                </div>
            </div>

            <!-- Join CTA -->
            <div class="bg-roots-red text-white p-6 border-4 border-roots-black shadow-[8px_8px_0px_0px_#1a1a1a]">
                <h3 class="font-black uppercase text-2xl mb-2">Join Usage</h3>
                <p class="font-bold mb-6 text-sm opacity-90">Become a registered member in {{ county.name }} today.</p>
                <a href="{% url 'join' %}" class="block w-full bg-roots-black text-center py-3 font-black uppercase hover:bg-white hover:text-roots-black transition-colors border-2 border-transparent hover:border-roots-black">
                    Register Now
                </a>
            </div>
            
            {% if not county.coordinator_name %}
            <!-- Coordinator CTA -->
            <div class="bg-roots-black text-white p-6 border-4 border-white shadow-lg">
                <h3 class="font-black uppercase text-xl mb-2 text-roots-red">Vacancy Alert</h3>
                <p class="font-bold mb-4 text-sm opacity-90">We need a strong leader for {{ county.name }}. Apply to be the County Coordinator.</p>
                <a href="{% url 'contact' %}?subject=volunteering" class="block w-full bg-white text-roots-black text-center py-2 font-black uppercase hover:bg-roots-red hover:text-white transition-colors">
                    Apply Now
                </a>
            </div>
            {% endif %}
        </div>
    </div>

</div>
{% endblock %}
