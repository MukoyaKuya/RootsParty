{% extends 'base.html' %}

{% block content %}
<div class="mt-8 mb-24 space-y-8">
    
    <!-- Newspaper Header -->
    <header class="border-b-8 border-roots-black pb-4 text-center relative overflow-hidden bg-white">
        <div class="flex justify-between items-center border-b-4 border-roots-black pb-2 mb-4">
            <span class="font-bold uppercase text-xs">Vol. 420</span>
            <span class="font-bold uppercase text-xs">Nairobi, Kenya</span>
            <span class="font-bold uppercase text-xs">Tingiza Mti</span>
        </div>
        
        <div class="md:flex md:items-center md:justify-center md:gap-12 p-8 border-b-4 border-roots-black bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]">
            <div class="relative inline-block mb-12 md:mb-0 transform hover:scale-110 transition-transform duration-300">
                <!-- Logo with rotation animation -->
                <div class="relative z-10 bg-white rounded-full p-2 border-4 border-roots-black">
                     <img src="/static/images/logo.png" 
                     id="roots-logo"
                     alt="Roots Party Logo" 
                     class="w-48 h-48 mx-auto animate-palpate hover:animate-none transition-all cursor-pointer">
                </div>
                
                <!-- Badge -->
                <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-full whitespace-nowrap z-20">
                    <span class="bg-roots-red text-white px-4 py-1 font-black uppercase text-xl border-4 border-roots-black shadow-[4px_4px_0px_0px_#1a1a1a] transform -rotate-3 inline-block">Official Platform</span>
                </div>
            </div>
            
            <div class="mt-8 md:mt-0 relative">
                <div class="max-w-2xl text-left transform -rotate-1">
                    <h1 class="font-black uppercase text-4xl md:text-6xl mb-6 leading-none">
                        Welcome to the <span class="text-roots-red bg-roots-black text-white px-2 inline-block transform rotate-1">Roots Party Platform</span>
                    </h1>
                    <div class="font-bold text-xl md:text-2xl border-4 border-roots-black bg-white p-6 shadow-[8px_8px_0px_0px_#1a1a1a] relative">
                         <!-- Pin Icon -->
                        <div class="absolute -top-6 -left-6 transform -rotate-12">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="#E60000" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-12 h-12 text-roots-black">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
                            </svg>
                        </div>
                        <p class="leading-relaxed">
                            "We are collaborating and organizing for a brighter, more equal future. Together, we will elect Roots up and down the ballot."
                        </p>
                    </div>
                </div>
                
                <!-- Decorative Elements -->
                <div class="absolute -top-12 -right-8 opacity-100 pointer-events-none select-none animate-bounce">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-12 h-12"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" /></svg>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="border-4 border-roots-black p-4 shadow-[8px_8px_0px_0px_rgba(26,26,26,1)] bg-white text-center">
        <h2 class="text-4xl font-black uppercase mb-4 border-b-4 border-roots-black inline-block">
            The Revolution Is Here
        </h2>
        
        <p class="mb-8 font-bold text-lg leading-tight">
            COMPRADES, THE TIME IS NOW. THE SYSTEM IS BROKEN. WE HAVE THE SOLUTION.
        </p>

        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <a href="/manifesto/" class="brutal-btn inline-flex items-center justify-center gap-2 text-xl w-auto">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                </svg>
                <span>Read The 10 Commandments</span>
            </a>
            <a href="/gallery/" class="brutal-btn inline-flex items-center justify-center gap-2 text-xl w-auto bg-white text-roots-black hover:bg-roots-black hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z" />
                </svg>
                <span>View Gallery</span>
            </a>
            <a href="/contact/" class="brutal-btn inline-flex items-center justify-center gap-2 text-xl w-auto bg-roots-black text-white hover:bg-roots-red hover:border-roots-red">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
                </svg>
                <span>Contact Us</span>
            </a>
        </div>
    </section>
    
    <!-- CTA -->
    <div class="py-4 text-center">
        <a href="/join/" class="brutal-btn inline-flex items-center justify-center gap-3 text-3xl hover:bg-roots-black hover:text-white transition-all transform hover:-translate-y-1 hover:translate-x-1 hover:shadow-[8px_8px_0px_0px_#E60000]">
            <span>Join The Party</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z" />
            </svg>
        </a>
    </div>

    <!-- Latest News Only -->
    <div class="border-4 border-roots-black bg-white shadow-[8px_8px_0px_0px_#1a1a1a]">
        <div class="bg-roots-black text-white px-4 py-3 flex items-center justify-between">
            <h3 class="font-black uppercase flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" />
                </svg>
                Latest News
            </h3>
            <a href="/news/" class="text-sm font-bold hover:text-roots-red transition-colors">View All â†’</a>
        </div>
        <div class="p-4 space-y-3">
            {% if latest_posts %}
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {% for post in latest_posts %}
                    <a href="/news/{{ post.slug }}/" class="block p-3 border-2 border-gray-200 hover:border-roots-red hover:bg-gray-50 transition-all group">
                        <div class="flex items-start gap-3">
                            <div class="w-2 h-2 bg-roots-red rounded-full mt-2 flex-shrink-0"></div>
                            <div>
                                <span class="text-xs font-bold text-roots-red uppercase">{{ post.get_category_display }}</span>
                                <h4 class="font-black text-lg group-hover:text-roots-red transition-colors">{{ post.title }}</h4>
                                <p class="text-sm text-gray-600 font-medium">{{ post.excerpt|truncatewords:15 }}</p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            {% else %}
                <div class="text-center py-6">
                    <p class="text-gray-500 font-bold">No news yet</p>
                    <p class="text-sm text-gray-400">Check back soon for updates!</p>
                </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Quick Links -->
    <div class="grid grid-cols-2 gap-4">
        <a href="/manifesto/marijuana/" class="border-4 border-roots-black p-4 bg-roots-red text-white flex flex-col items-center text-center hover:shadow-[6px_6px_0px_0px_#1a1a1a] transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-12 h-12 mb-2">
               <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z" />
               <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z" />
            </svg>
            <h3 class="font-black uppercase text-2xl leading-none mb-1">Weed</h3>
            <p class="font-bold text-sm leading-tight">Economic freedom is coming.</p>
        </a>
        <a href="/manifesto/snake-farming/" class="border-4 border-roots-black p-4 bg-white flex flex-col items-center text-center hover:shadow-[6px_6px_0px_0px_#E60000] transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-12 h-12 mb-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .663-.658v0c0-.355-.186-.676-.401-.959a1.58 1.58 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.959.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z" />
            </svg>
            <h3 class="font-black uppercase text-2xl leading-none mb-1">Snakes</h3>
            <p class="font-bold text-sm leading-tight">Venom is the new gold.</p>
        </a>
    </div>
</div>


<style>
    .blink {
        animation: blink 1s step-end infinite;
    }
    @keyframes blink {
        50% { opacity: 0; }
    }
    .outline-text {
        -webkit-text-stroke: 3px #1a1a1a; 
        color: #E60000;
    }
    /* Palpate (Heartbeat) Animation */
    @keyframes palpate {
        0% { transform: scale(1); }
        25% { transform: scale(1.1); }
        35% { transform: scale(1); }
        45% { transform: scale(1.1); }
        60% { transform: scale(1); }
        100% { transform: scale(1); }
    }
    .animate-palpate {
        animation: palpate 2s infinite ease-in-out;
    }
    /* Shake Animation */
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    .shake-active {
        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
</style>
<!-- Welcome Modal -->
<div id="welcome-modal" class="hidden fixed inset-0 z-[70] items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
    <div class="bg-white border-4 border-roots-black shadow-[16px_16px_0px_0px_#E60000] p-6 max-w-lg w-full relative transform scale-100 transition-transform animate-[bounce_0.5s_ease-out]">
        <!-- Close Button (X) -->
        <button onclick="closeWelcomeModal()" class="absolute -top-6 -right-6 bg-roots-red text-white border-4 border-roots-black h-12 w-12 flex items-center justify-center font-black text-xl hover:scale-110 transition-transform shadow-[4px_4px_0px_0px_#1a1a1a] z-20">
            X
        </button>
        
        <div class="text-center mb-6">
             <div class="w-24 h-24 mx-auto border-4 border-roots-black rounded-full overflow-hidden bg-white flex items-center justify-center p-1 mb-4">
                <img src="/static/images/logo.png" alt="Logo" class="w-full h-full object-contain">
            </div>
            <h2 class="text-4xl font-black uppercase mb-2 border-b-4 border-roots-black inline-block bg-roots-black text-white px-2 transform -rotate-2">Karibu Comrade!</h2>
        </div>

        <p class="font-bold text-lg mb-4 uppercase text-center">
            Welcome to the official digital headquarters of The Roots Party.
        </p>
        
        <div class="bg-gray-100 border-4 border-roots-black p-4 mb-6">
            <p class="font-bold mb-2 uppercase">Our Agenda:</p>
            <ul class="list-none font-bold space-y-2 uppercase text-sm">
                <li class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z" /></svg>
                    Legalize Marijuana
                </li>
                <li class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056" /></svg>
                    Snake Farming
                </li>
                <li class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z" /></svg>
                    Hang The Corrupt
                </li>
            </ul>
        </div>
        
        <button onclick="closeWelcomeModal()" class="brutal-btn w-full text-xl hover:bg-roots-black hover:text-white transition-colors">
            TINGIZA MTI
        </button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (!localStorage.getItem('roots_visited')) {
            const modal = document.getElementById('welcome-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Logo shake on click
        const logo = document.getElementById('roots-logo');
        if (logo) {
            logo.addEventListener('click', function() {
                // Remove the class if it exists to restart the animation
                logo.classList.remove('shake-active');
                
                // Trigger reflow to restart css animation
                void logo.offsetWidth;
                
                // Add the class back
                logo.classList.add('shake-active');
            });
        }
    });

    function closeWelcomeModal() {
        document.getElementById('welcome-modal').classList.add('hidden');
        document.getElementById('welcome-modal').classList.remove('flex');
        localStorage.setItem('roots_visited', 'true');
    }
</script>

{% endblock %}
