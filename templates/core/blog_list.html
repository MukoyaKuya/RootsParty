{% extends 'base.html' %}

{% block title %}News & Updates - Roots Party{% endblock %}

{% block content %}
<div class="mt-8 mb-24 max-w-6xl mx-auto px-4">
    
    <!-- Header -->
    <div class="text-center mb-12">
        <div class="inline-block bg-roots-black text-white px-6 py-3 font-black text-xl uppercase transform -rotate-2 border-4 border-roots-red shadow-[8px_8px_0px_0px_#E60000] mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8 inline mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" />
            </svg>
            News & Updates
        </div>
        <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter leading-[0.85] mb-4">
            Party <span class="text-roots-red">News</span>
        </h1>
        <p class="text-xl font-bold text-gray-700 max-w-2xl mx-auto">
            Stay informed with the latest updates from the Roots Party movement.
        </p>
    </div>

    <!-- Category Filters -->
    <div class="flex flex-wrap gap-2 justify-center mb-8">
        <a href="/news/" class="px-4 py-2 font-bold uppercase text-sm border-4 border-roots-black {% if not current_category %}bg-roots-black text-white{% else %}bg-white hover:bg-gray-100{% endif %} transition-all">
            All
        </a>
        {% for cat_code, cat_label in categories %}
        <a href="/news/?category={{ cat_code }}" class="px-4 py-2 font-bold uppercase text-sm border-4 border-roots-black {% if current_category == cat_code %}bg-roots-black text-white{% else %}bg-white hover:bg-gray-100{% endif %} transition-all">
            {{ cat_label }}
        </a>
        {% endfor %}
    </div>

    {% if posts %}
    <!-- News Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for post in posts %}
        <article class="bg-white border-4 border-roots-black shadow-[8px_8px_0px_0px_#1a1a1a] hover:shadow-[12px_12px_0px_0px_#E60000] transition-all group">
            {% if post.image %}
            <div class="h-48 overflow-hidden border-b-4 border-roots-black relative">
                <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                {% if post.video_url or post.video_file %}
                <div class="absolute inset-0 flex items-center justify-center bg-black/30">
                    <div class="w-12 h-12 bg-roots-red rounded-full flex items-center justify-center border-2 border-white shadow-lg relative z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="white" class="w-6 h-6 ml-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" />
                        </svg>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}
            <div class="p-5 relative">
                <!-- Sticker -->
                <div class="absolute -top-3 -right-2 bg-yellow-400 text-roots-black font-black uppercase text-[10px] px-2 py-1 transform rotate-12 border-2 border-roots-black shadow-[2px_2px_0px_0px_#000000] z-10">
                    Official
                </div>
                
                <div class="flex items-center gap-3 mb-3">
                    <span class="bg-roots-red text-white px-2 py-1 text-xs font-black uppercase">{{ post.get_category_display }}</span>
                    <span class="text-sm font-bold text-gray-500">{{ post.created_at|date:"M d, Y" }}</span>
                </div>
                <h2 class="text-2xl font-black uppercase mb-2 group-hover:text-roots-red transition-colors">{{ post.title }}</h2>
                <p class="text-gray-700 font-medium mb-4">{{ post.excerpt }}</p>
                <div class="flex items-center justify-between">
                    <span class="text-sm font-bold text-gray-500">{{ post.read_time }}</span>
                    <a href="/news/{{ post.slug }}/" class="font-black uppercase text-sm text-roots-red hover:underline flex items-center gap-1">
                        Read More
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                        </svg>
                    </a>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="text-center py-16 bg-gray-100 border-4 border-roots-black">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mx-auto text-gray-400 mb-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" />
        </svg>
        <h3 class="text-2xl font-black uppercase mb-2">No News Yet</h3>
        <p class="text-gray-600 font-bold">Check back soon for party updates and announcements!</p>
    </div>
    {% endif %}
</div>
{% endblock %}
