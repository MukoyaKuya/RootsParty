{% extends 'base.html' %}

{% block title %}Nationwide Presence - Roots Party{% endblock %}

{% block content %}
<div class="mt-8 mb-24 max-w-7xl mx-auto px-4">
    
    <!-- Header -->
    <div class="text-center mb-12">
        <div class="inline-block bg-roots-black text-white px-6 py-3 font-black text-xl uppercase transform -rotate-2 border-4 border-roots-red shadow-[8px_8px_0px_0px_#E60000] mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8 inline mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
            </svg>
            {{ page_content.title|default:"Nationwide Presence" }}
        </div>
        <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter leading-[0.85] mb-4">
            {% if page_content.subtitle %}
                {{ page_content.subtitle }}
            {% else %}
                Roots <span class="text-roots-red">Across Kenya</span>
            {% endif %}
        </h1>
        <p class="text-xl font-bold text-gray-700 max-w-2xl mx-auto">
            {{ page_content.content|default:"We are building a grassroots movement in every village, ward, and county."|linebreaksbr }}
        </p>
    </div>

    <!-- Stats Dashboard -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
        <div class="bg-roots-black text-white p-6 border-4 border-roots-red shadow-[6px_6px_0px_0px_#1a1a1a]">
            <p class="text-4xl font-black">{{ stats.total }}</p>
            <p class="font-bold text-sm uppercase text-gray-400">Total Counties</p>
        </div>
        <div class="bg-green-600 text-white p-6 border-4 border-roots-black shadow-[6px_6px_0px_0px_#1a1a1a]">
            <p class="text-4xl font-black">{{ stats.active }}</p>
            <p class="font-bold text-sm uppercase text-green-100">Active Presence</p>
        </div>
        <div class="bg-amber-500 text-black p-6 border-4 border-roots-black shadow-[6px_6px_0px_0px_#1a1a1a]">
            <p class="text-4xl font-black">{{ stats.growing }}</p>
            <p class="font-bold text-sm uppercase text-amber-900">Growing Fast</p>
        </div>
        <div class="bg-white text-roots-black p-6 border-4 border-roots-black shadow-[6px_6px_0px_0px_#E60000]">
            <p class="text-4xl font-black">{{ stats.total_members }}+</p>
            <p class="font-bold text-sm uppercase text-gray-600">Registered Members</p>
        </div>
    </div>

    <!-- Map/Grid Visualization (Grid for now, interactive map could be future V2) -->
    <div class="border-4 border-roots-black bg-gray-50 p-6 md:p-8 mb-12">
        <h2 class="text-3xl font-black uppercase mb-6 flex items-center gap-3">
            <span class="w-4 h-8 bg-roots-red block"></span>
            County Status List
        </h2>

        <!-- Filters -->
        <div class="flex flex-wrap gap-4 mb-8">
            <div class="flex items-center gap-2">
                <span class="w-4 h-4 rounded-full bg-green-500 border-2 border-black"></span>
                <span class="font-bold uppercase text-sm">Active</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-4 h-4 rounded-full bg-amber-500 border-2 border-black"></span>
                <span class="font-bold uppercase text-sm">Growing</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-4 h-4 rounded-full bg-blue-400 border-2 border-black"></span>
                <span class="font-bold uppercase text-sm">Starting</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-4 h-4 rounded-full bg-gray-300 border-2 border-black"></span>
                <span class="font-bold uppercase text-sm">Planned</span>
            </div>
        </div>

        {% if counties %}
        <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            {% for county in counties %}
            <div class="bg-white border-4 p-4 hover:-translate-y-1 hover:shadow-[4px_4px_0px_0px_#000] transition-all relative overflow-hidden group
                {% if county.presence_status == 'active' %}border-green-600
                {% elif county.presence_status == 'growing' %}border-amber-500
                {% elif county.presence_status == 'starting' %}border-blue-400
                {% else %}border-gray-300{% endif %}">
                
                <!-- Status Badge -->
                <div class="absolute top-0 right-0 px-2 py-1 text-[10px] font-black uppercase text-white
                    {% if county.presence_status == 'active' %}bg-green-600
                    {% elif county.presence_status == 'growing' %}bg-amber-500
                    {% elif county.presence_status == 'starting' %}bg-blue-400
                    {% else %}bg-gray-400{% endif %}">
                    {{ county.presence_status|title }}
                </div>

                <h3 class="font-black uppercase text-xl mb-1">{{ county.code }} - {{ county.name }}</h3>
                
                {% if county.coordinator_name %}
                <div class="flex items-center gap-2 mb-2 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 text-gray-400">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                    </svg>
                    <span class="font-bold text-gray-700">{{ county.coordinator_name }}</span>
                </div>
                {% endif %}

                <div class="grid grid-cols-2 gap-2 mt-4 pt-4 border-t-2 border-gray-100">
                    <div>
                        <p class="text-xs font-bold text-gray-400 uppercase">Members</p>
                        <p class="font-black text-lg">{{ county.members_count }}</p>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-gray-400 uppercase">Offices</p>
                        <p class="font-black text-lg">{{ county.offices_count }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <p class="font-bold text-gray-500">No counties data available yet.</p>
        </div>
        {% endif %}
    </div>

    <!-- Logic for get_presence_status_display splitting is custom django template filter, 
         but for simplicity we can just use the full display or assume we want the first word if we don't have the filter. 
         Wait, 'split' filter isn't standard. I'll fix the badge logic to just use specific conditional text or full display. -->
</div>

<!-- CTA -->
<div class="bg-roots-red text-white p-8 md:p-12 text-center border-4 border-roots-black mb-12 shadow-[12px_12px_0px_0px_#1a1a1a]">
    <h2 class="text-3xl md:text-5xl font-black uppercase mb-4">Lead The Roots Revolution in Your County</h2>
    <p class="text-xl font-bold mb-8 max-w-2xl mx-auto">We are looking for brave coordinators to lead the grassroots movement. Are you ready to Tingiza Mti?</p>
    <div class="flex flex-col md:flex-row gap-4 justify-center">
        <a href="/join/" class="bg-roots-black text-white px-8 py-4 font-black uppercase text-xl border-4 border-white hover:bg-white hover:text-roots-black transition-all">
            Become a Coordinator
        </a>
        <a href="/contact/?subject=volunteering" class="bg-white text-roots-black px-8 py-4 font-black uppercase text-xl border-4 border-roots-black hover:bg-roots-black hover:text-white transition-all">
            Contact Support
        </a>
    </div>
</div>
{% endblock %}
